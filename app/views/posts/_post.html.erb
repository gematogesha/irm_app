<div class="post__flex">
    <% (1..4).each do |ind|%>
        <div class="line line_id_<%= ind %>">
            <% @posts.each_with_index do |post, i| %>
                <% if (i+1 - ind)%4==0 %>
                    <div class="post-box__item" id="post_id_<%= post.id %>">
                        <% if post.hot == true %>
                            <div class="post__hot"><%= icon("fa-solid", "fire",  class: 'fa-beat')%></div>
                        <% end %>
                        <% if post.best == true %>
                            <div class="post__best"><%= icon("fa-solid", "star")%></div>
                        <% end %>
                        <div class="post__item_img left">
                            <%= link_to post_path(post.number), class: "left flex-block" do%>
                                <% if post.image.present? %>
                                    <%= image_tag(post.image, alt: post.title, title: post.title) %>
                                <% else %>
                                    <%= image_tag("noimage.png", alt: "Нет изображения", title: 'Нет изображения') %>
                                <% end %>
                            <% end %>
                        </div>
                        <div class="post__item_details">
                            <div class="post__item_title">
                                <h6><%= link_to post.title.truncate(70, separator: ' '), post_path(post.number)%></h5>
                            </div>
                            <span align="justify" class="left">
                                <%= post.content.to_plain_text.truncate(200, separator: ' ').gsub(/\[.+?\]/, '') %>
                            </span>
                            <div class="post__item_date small right"><%= l(post.created_at, format: :long) %></div>
                        </div>
                    </div>
                <% end %>
            <% end %>
        </div>
    <% end %>
</div>
